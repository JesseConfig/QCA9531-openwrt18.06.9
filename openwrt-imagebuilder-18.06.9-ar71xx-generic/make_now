#!/bin/bash

# https://github.com/JesseConfig/LedeTomeXiaoyuC5/tree/Test
# https://downloads.openwrt.org/releases/18.06.9/targets/ar71xx/generic/
# https://downloads.openwrt.org/releases/18.06.9/targets/ar71xx/generic/openwrt-imagebuilder-18.06.9-ar71xx-generic.Linux-x86_64.tar.xz


#wget -O imagebuilder.tar.xz https://downloads.openwrt.org/releases/18.06.9/targets/ar71xx/generic/openwrt-imagebuilder-18.06.9-ar71xx-generic.Linux-x86_64.tar.xz 
#tar xvJf imagebuilder.tar.xz
#cd openwrt-imagebuilder-18.06.9-ar71xx-generic.Linux-x86_64

make image PROFILE=AP147_010 PACKAGES="-kmod-usb-core -kmod-usb-storage -kmod-usb2 -dnsmasq dnsmasq-full \
 luci-theme-material luci-i18n-ntpc-zh-cn luci-i18n-tinyproxy-zh-cn nodogsplash zerotier iwinfo ip-full curl wireless-tools terminfo tc tcpdump mcproxy monit luci luci-app-upnp luci-i18n-upnp-zh-cn luci-app-commands luci-app-firewall luci-app-nlbwmon luci-app-ntpc luci-app-wifischedule luci-app-wol luci-base luci luci-i18n-base-zh-cn luci-i18n-commands-zh-cn luci-i18n-firewall-zh-cn luci-i18n-nlbwmon-zh-cn luci-i18n-ntpc-zh-cn luci-i18n-wifischedule-zh-cn luci-i18n-wol-zh-cn luci-mod-admin-full luci-mod-rpc luci-proto-ipv6 luci-proto-ppp luci-proto-relay luci-app-uhttpd luci-i18n-uhttpd-zh-cn iperf3 kmod-swconfig kmod-nls-cp437 kmod-nls-cp936 kmod-nls-iso8859-1 kmod-nls-utf8 kmod-ppp kmod-pppoe kmod-pptp 6rd 6to4 6in4 464xlat map-t ds-lite luci-compat luci-lib-httpprotoutils iptables-mod-extra iptables-mod-filter iptables-mod-ipmark iptables-mod-iprange iptables-mod-nat-extra kmod-crypto-aead kmod-crypto-crc32c kmod-crypto-des kmod-crypto-ecb kmod-crypto-hash kmod-crypto-hmac kmod-crypto-manager kmod-crypto-md4 kmod-crypto-md5 kmod-crypto-null kmod-crypto-pcompress kmod-crypto-sha1 kmod-crypto-sha256 kmod-ipt-account kmod-ipt-compat-xtables  kmod-ipt-extra kmod-ipt-filter kmod-ipt-ipmark kmod-ipt-iprange kmod-ipt-ipv4options kmod-ipt-logmark kmod-ipt-nat-extra kmod-leds-gpio kmod-ledtrig-netdev kmod-ledtrig-gpio kmod-arptables kmod-bonding kmod-button-hotplug  kmod-ebtables kmod-ebtables-ipv4 kmod-ebtables-watchers kmod-fuse kmod-ifb kmod-input-core kmod-ipt-u32  kmod-lib-crc16 kmod-lib-textsearch kmod-nf-ipt kmod-nfnetlink-log kmod-nfnetlink-queue kmod-sched-connmark kmod-sched-core" FILES=QCA953_fsroot
 
 # QCA953_fsroot

# 464xlat 6in4 6rd 6to4 ds-lite iperf3 kmod-nls-cp437 kmod-nls-cp936 kmod-nls-iso8859-1 kmod-nls-utf8 kmod-ppp kmod-pppoe kmod-pptp kmod-swconfig luci luci luci-app-commands luci-app-firewall luci-app-nlbwmon luci-app-ntpc luci-app-uhttpd luci-app-upnp luci-app-wifischedule luci-app-wol luci-base luci-i18n-base-zh-cn luci-i18n-commands-zh-cn luci-i18n-firewall-zh-cn luci-i18n-nlbwmon-zh-cn luci-i18n-ntpc-zh-cn luci-i18n-ntpc-zh-cn luci-i18n-tinyproxy-zh-cn luci-i18n-uhttpd-zh-cn luci-i18n-upnp-zh-cn luci-i18n-wifischedule-zh-cn luci-i18n-wol-zh-cn luci-mod-admin-full luci-mod-rpc luci-proto-ipv6 luci-proto-ppp luci-proto-relay luci-theme-material map-t nodogsplash zerotier

# cat bin/targets/ar71xx/generic/openwrt-18.06.9-ar71xx-generic-device-ap147-010.manifest |awk '{ print $1 }' |sort |wc -l

:<<BLOCK'
....注释 
 cat bin/targets/ar71xx/generic/openwrt-18.06.9-ar71xx-generic-device-ap147-010.manifest |awk '{ print $1 }' |sort |sed ':a;N;s/\n/ /;ba;'

464xlat 6in4 6rd 6to4 base-files busybox ca-bundle curl dnsmasq-full dropbear ds-lite etherwake firewall fstools fwtool hostapd-common ip6tables iperf3 ip-full iptables iptables-mod-conntrack-extra iptables-mod-extra iptables-mod-filter iptables-mod-ipmark iptables-mod-ipopt iptables-mod-iprange iptables-mod-nat-extra ip-tiny iw-full iwinfo jshn jsonfilter kernel kmod-arptables kmod-ath kmod-ath9k kmod-ath9k-common kmod-bonding kmod-button-hotplug kmod-cfg80211 kmod-crypto-aead kmod-crypto-crc32c kmod-crypto-des kmod-crypto-ecb kmod-crypto-hash kmod-crypto-hmac kmod-crypto-manager kmod-crypto-md4 kmod-crypto-md5 kmod-crypto-null kmod-crypto-pcompress kmod-crypto-sha1 kmod-crypto-sha256 kmod-ebtables kmod-ebtables-ipv4 kmod-ebtables-watchers kmod-fuse kmod-gpio-button-hotplug kmod-gre kmod-ifb kmod-input-core kmod-ip6tables kmod-ip6-tunnel kmod-ipt-account kmod-ipt-compat-xtables kmod-ipt-conntrack kmod-ipt-conntrack-extra kmod-ipt-core kmod-ipt-extra kmod-ipt-filter kmod-ipt-ipmark kmod-ipt-ipopt kmod-ipt-iprange kmod-ipt-ipset kmod-ipt-ipv4options kmod-ipt-logmark kmod-ipt-nat kmod-ipt-nat-extra kmod-ipt-u32 kmod-iptunnel kmod-iptunnel4 kmod-iptunnel6 kmod-leds-gpio kmod-ledtrig-gpio kmod-ledtrig-netdev kmod-lib-crc16 kmod-lib-crc-ccitt kmod-libphy kmod-lib-textsearch kmod-mac80211 kmod-nat46 kmod-nf-conntrack kmod-nf-conntrack6 kmod-nf-conntrack-netlink kmod-nf-ipt kmod-nf-ipt6 kmod-nf-nat kmod-nfnetlink kmod-nfnetlink-log kmod-nfnetlink-queue kmod-nf-reject kmod-nf-reject6 kmod-nls-base kmod-nls-cp437 kmod-nls-cp936 kmod-nls-iso8859-1 kmod-nls-utf8 kmod-ppp kmod-pppoe kmod-pppox kmod-pptp kmod-sched-connmark kmod-sched-core kmod-sit kmod-slhc kmod-swconfig kmod-tun libblobmsg-json libc libcurl libgcc libgmp libip4tc libip6tc libiwinfo libiwinfo-lua libjson-c libjson-script liblua liblucihttp liblucihttp-lua libmbedtls libmicrohttpd-no-ssl libminiupnpc libmnl libnatpmp libnetfilter-conntrack libnettle libnfnetlink libnl-tiny libopenssl libpcap libpthread librt libstdcpp libubox libubus libubus-lua libuci libuclient libuuid libxtables logd lua luci luci-app-commands luci-app-firewall luci-app-nlbwmon luci-app-ntpc luci-app-tinyproxy luci-app-uhttpd luci-app-upnp luci-app-wifischedule luci-app-wol luci-base luci-compat luci-i18n-base-zh-cn luci-i18n-commands-zh-cn luci-i18n-firewall-zh-cn luci-i18n-nlbwmon-zh-cn luci-i18n-ntpc-zh-cn luci-i18n-tinyproxy-zh-cn luci-i18n-uhttpd-zh-cn luci-i18n-upnp-zh-cn luci-i18n-wifischedule-zh-cn luci-i18n-wol-zh-cn luci-lib-httpprotoutils luci-lib-ip luci-lib-json luci-lib-jsonc luci-lib-nixio luci-mod-admin-full luci-mod-rpc luci-proto-ipv6 luci-proto-ppp luci-proto-relay luci-theme-bootstrap luci-theme-material map map-t mcproxy miniupnpd monit mtd netifd nlbwmon nodogsplash ntpclient odhcp6c odhcpd-ipv6only openwrt-keyring opkg ppp ppp-mod-pppoe procd relayd resolveip rpcd rpcd-mod-rrdns swconfig tc tcpdump terminfo tinyproxy uboot-envtools ubox ubus ubusd uci uclient-fetch uhttpd usign wifischedule wireless-regdb wireless-tools wpad-mini zerotier zlib

'BLOCK 